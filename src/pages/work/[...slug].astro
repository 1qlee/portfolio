---
import { getCollection, getEntry, type CollectionEntry } from "astro:content";
import { render } from "astro:content";
import Work from "../../layouts/Work.astro";

export async function getStaticPaths() {
  const workEntries = await getCollection("work");
  return workEntries.map((entry) => ({
    params: { slug: entry.data.slug },
    props: { entry }, // Pass the entire CollectionEntry object
  }));
}

const { entry } = Astro.props as { entry: CollectionEntry<"work"> }; // Type assertion for clarity

if (!entry) {
  // Handle 404 appropriately
  return Astro.redirect("/404");
}

const { Content } = await render(entry);
---

<Work workEntry={entry}>
  <Content />
</Work>
